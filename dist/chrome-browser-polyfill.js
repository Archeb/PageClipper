!function(){"use strict";"undefined"==typeof globalThis&&(window.globalThis=window),(()=>{if(!globalThis.browser&&globalThis.chrome){const e=globalThis.chrome;globalThis.__defineGetter__("browser",(()=>({action:{onClicked:{addListener:r=>e.action.onClicked.addListener(r)},setBadgeText:r=>e.action.setBadgeText(r),setBadgeBackgroundColor:r=>e.action.setBadgeBackgroundColor(r),setTitle:r=>e.action.setTitle(r),setIcon:r=>e.action.setIcon(r)},bookmarks:{get:r=>e.bookmarks.get(r),onCreated:{addListener:r=>e.bookmarks.onCreated.addListener(r),removeListener:r=>e.bookmarks.onCreated.removeListener(r)},onChanged:{addListener:r=>e.bookmarks.onChanged.addListener(r),removeListener:r=>e.bookmarks.onChanged.removeListener(r)},update:(r,t)=>e.bookmarks.update(r,t)},commands:{onCommand:{addListener:r=>e.commands.onCommand.addListener(r)}},downloads:{download:r=>e.downloads.download(r),onChanged:{addListener:r=>e.downloads.onChanged.addListener(r),removeListener:r=>e.downloads.onChanged.removeListener(r)},search:r=>e.downloads.search(r)},i18n:{getAcceptLanguages:()=>new Promise(((r,t)=>{e.i18n.getAcceptLanguages((n=>{e.runtime.lastError?t(e.runtime.lastError):r(n)}))}))},identity:{get getAuthToken(){return e.identity&&e.identity.getAuthToken&&(r=>new Promise(((t,n)=>e.identity.getAuthToken(r,(r=>{e.runtime.lastError?n(e.runtime.lastError):t(r)})))))},get launchWebAuthFlow(){return e.identity&&e.identity.launchWebAuthFlow&&(r=>new Promise(((t,n)=>{e.identity.launchWebAuthFlow(r,(r=>{e.runtime.lastError?n(e.runtime.lastError):t(r)}))})))},get removeCachedAuthToken(){return e.identity&&e.identity.removeCachedAuthToken&&(r=>new Promise(((t,n)=>e.identity.removeCachedAuthToken(r,(()=>{e.runtime.lastError?n(e.runtime.lastError):t()})))))}},contextMenus:{onClicked:{addListener:r=>e.contextMenus.onClicked.addListener(r)},create:r=>e.contextMenus.create(r),update:(r,t)=>new Promise(((n,o)=>{e.contextMenus.update(r,t,(()=>{e.runtime.lastError?o(e.runtime.lastError):n()}))})),removeAll:()=>new Promise(((r,t)=>{e.contextMenus.removeAll((()=>{e.runtime.lastError?t(e.runtime.lastError):r()}))}))},permissions:{request:r=>e.permissions.request(r),remove:r=>e.permissions.remove(r)},runtime:{connectNative:r=>e.runtime.connectNative(r),getManifest:()=>e.runtime.getManifest(),onMessage:{addListener:r=>e.runtime.onMessage.addListener(((e,t,n)=>{const o=r(e,t);if(o&&"function"==typeof o.then)return o.then((e=>{if(void 0!==e)try{n(e)}catch(e){}})),!0})),removeListener:r=>e.runtime.onMessage.removeListener(r)},onMessageExternal:{addListener:r=>e.runtime.onMessageExternal.addListener(((e,t,n)=>{const o=r(e,t);if(o&&"function"==typeof o.then)return o.then((e=>{if(void 0!==e)try{n(e)}catch(e){}})),!0}))},sendMessage:r=>new Promise(((t,n)=>{e.runtime.sendMessage(r,(r=>{e.runtime.lastError?n(new Error(e.runtime.lastError.message)):t(r)})),e.runtime.lastError&&n(new Error(e.runtime.lastError.message))})),getURL:r=>e.runtime.getURL(r),get lastError(){return e.runtime.lastError}},scripting:{executeScript:r=>e.scripting.executeScript(r)},storage:{local:{set:r=>new Promise(((t,n)=>{e.storage.local.set(r,(()=>{e.runtime.lastError?n(e.runtime.lastError):t()}))})),get:()=>new Promise(((r,t)=>{e.storage.local.get(null,(n=>{e.runtime.lastError?t(e.runtime.lastError):r(n)}))})),clear:()=>new Promise(((r,t)=>{e.storage.local.clear((()=>{e.runtime.lastError?t(e.runtime.lastError):r()}))})),remove:r=>new Promise(((t,n)=>{e.storage.local.remove(r,(()=>{e.runtime.lastError?n(e.runtime.lastError):t()}))}))},sync:{set:r=>new Promise(((t,n)=>{e.storage.sync.set(r,(()=>{e.runtime.lastError?n(e.runtime.lastError):t()}))})),get:()=>new Promise(((r,t)=>{e.storage.sync.get(null,(n=>{e.runtime.lastError?t(e.runtime.lastError):r(n)}))})),clear:()=>new Promise(((r,t)=>{e.storage.sync.clear((()=>{e.runtime.lastError?t(e.runtime.lastError):r()}))})),remove:r=>new Promise(((t,n)=>{e.storage.sync.remove(r,(()=>{e.runtime.lastError?n(e.runtime.lastError):t()}))}))}},tabs:{onCreated:{addListener:r=>e.tabs.onCreated.addListener(r)},onActivated:{addListener:r=>e.tabs.onActivated.addListener(r)},onUpdated:{addListener:r=>e.tabs.onUpdated.addListener(r),removeListener:r=>e.tabs.onUpdated.removeListener(r)},onRemoved:{addListener:r=>e.tabs.onRemoved.addListener(r),removeListener:r=>e.tabs.onRemoved.removeListener(r)},onReplaced:{addListener:r=>e.tabs.onReplaced.addListener(r),removeListener:r=>e.tabs.onReplaced.removeListener(r)},sendMessage:(r,t,n={})=>new Promise(((o,s)=>{e.tabs.sendMessage(r,t,n,(r=>{e.runtime.lastError?s(e.runtime.lastError):o(r)})),e.runtime.lastError&&s(e.runtime.lastError)})),query:r=>e.tabs.query(r),create:r=>e.tabs.create(r),get:r=>e.tabs.get(r),remove:r=>e.tabs.remove(r),update:(r,t)=>e.tabs.update(r,t)},devtools:e.devtools&&{inspectedWindow:e.devtools.inspectedWindow&&{onResourceContentCommitted:e.devtools.inspectedWindow.onResourceContentCommitted&&{addListener:r=>e.devtools.inspectedWindow.onResourceContentCommitted.addListener(r)},get tabId(){return e.devtools.inspectedWindow.tabId}}}})))}})()}();
